{"version":3,"sources":["js/refs.js","js/back-to-top-btn.js","js/api/api-service.js","index.js"],"names":["searchForm","document","querySelector","queueBtn","watchedBtn","trailerBtn","mainFrame","gallery","logo","homeLink","myLibraryLink","teamLink","goTopBtn","window","addEventListener","trackScroll","scrolled","pageYOffset","coords","documentElement","clientHeight","classList","add","remove","backToTop","scrollBy","setTimeout","BASE_URL","API_KEY","POPULAR_MOVIES_URL","GENRE_LIST_URL","MOVIE_BY_SEARCH","MOVIE_BY_KEYWORD","MoviesApiService","constructor","searchQuery","page","language","fetchPopularMovies","url","fetch","then","response","json","fetchGenresList","fetchFullInfoOfMovie","movieId","incrementPage","resetPage","setPage","value","setRuLang","query","newQuery","moviesApiService","onSearch","e","preventDefault","console","log","currentTarget","elements","trim","fetchMoviesByGenre","data","catch","err","refs"],"mappings":"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","file":"src.252d00ac.js","sourceRoot":"../src","sourcesContent":["// export default function getRefs() {\n//   return {\n//     searchForm: document.querySelector('.search-form'),\n//   };\n// }\n\nconst searchForm = document.querySelector('.search-form');\nconst queueBtn = document.querySelector('.queue-btn');\nconst watchedBtn = document.querySelector('.watched-btn');\nconst trailerBtn = document.querySelector('.trailer-btn');\nconst mainFrame = document.querySelector('.js-main-frame');\nconst gallery = document.querySelector('.js-gallery');\nconst logo = document.querySelector('.js-logo');\nconst homeLink = document.querySelector('.js-home');\nconst myLibraryLink = document.querySelector('.js-my-library');\nconst teamLink = document.querySelector('.js-team-link');\n\nexport default {\n  searchForm,\n  queueBtn,\n  watchedBtn,\n  trailerBtn,\n  mainFrame,\n  gallery,\n  logo,\n  homeLink,\n  myLibraryLink,\n  teamLink,\n};\n","export default function () {\n  function trackScroll() {\n    var scrolled = window.pageYOffset;\n    var coords = document.documentElement.clientHeight;\n\n    if (scrolled > coords) {\n      goTopBtn.classList.add('back_to_top-show');\n    }\n    if (scrolled < coords) {\n      goTopBtn.classList.remove('back_to_top-show');\n    }\n  }\n\n  function backToTop() {\n    if (window.pageYOffset > 0) {\n      window.scrollBy(0, -80);\n      setTimeout(backToTop, 0);\n    }\n  }\n\n  var goTopBtn = document.querySelector('.back_to_top');\n\n  window.addEventListener('scroll', trackScroll);\n  goTopBtn.addEventListener('click', backToTop);\n}\n","const BASE_URL = `https://api.themoviedb.org/3`;\nconst API_KEY = `3d673b2d8e40eafc68577fae5a6a1f4b`;\nconst POPULAR_MOVIES_URL = `${BASE_URL}/movie/popular?api_key=${API_KEY}&include_adult=false`;\nconst GENRE_LIST_URL = `${BASE_URL}/genre/movie/list?api_key=${API_KEY}`;\nconst MOVIE_BY_SEARCH = `${BASE_URL}/search/movie?api_key=${API_KEY}&include_adult=false`;\nconst MOVIE_BY_KEYWORD = `${BASE_URL}/search/keyword?api_key=${API_KEY}&include_adult=false`;\n\nexport default class MoviesApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.language = 'en-US';\n  }\n\n  // ======== фыльмы по популярности ======== //\n  fetchPopularMovies() {\n    const url = `${POPULAR_MOVIES_URL}&language=${this.language}&page=${this.page}`;\n\n    return fetch(url).then(response => response.json());\n  }\n\n  // ======== список по жанрам ======== //\n  fetchGenresList() {\n    const url = `${GENRE_LIST_URL}&language=${this.language}`;\n\n    return fetch(url).then(response => response.json());\n  }\n\n  // ======== поиск фильмов ======== //\n\n  // fetchMoviesBySearch() {\n  //   const url = `${MOVIE_BY_SEARCH}&language=${this.language}&page=${this.page}`;\n\n  //   return fetch(url).then(response => response.json());\n  // }\n\n  // ======== поиск фильмов по id ======== //\n  fetchFullInfoOfMovie(movieId) {\n    const url = `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=${this.language}`;\n\n    return fetch(url).then(response => response.json());\n  }\n  // ======== поиск по ключевому слову ======== //\n\n  // fetchMoviesByKeyword() {\n  //   const url = `${MOVIE_BY_KEYWORD}&language=${this.language}&page=${this.page}`;\n\n  //   return fetch(url).then(response => response.json());\n  // }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  setPage(value) {\n    this.page = value;\n  }\n  setRuLang() {\n    this.language = 'ru-RU';\n  }\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n\n// ======== список запросов на сервер ======== //\n\n// https://api.themoviedb.org/3/movie/popular?api_key=<<api_key>>&language=en-US&page=1\n//api.themoviedb.org/3/genre/movie/list?api_key=<<api_key>>&language=en-US\n//https://api.themoviedb.org/3/search/movie?api_key=<<api_key>>&language=en-US&page=1&include_adult=false\n// https://api.themoviedb.org/3/search/multi?api_key=<<api_key>>&language=en-US&page=1&include_adult=false\n// https://api.themoviedb.org/3/movie/{movie_id}?api_key=<<api_key>>&language=en-US\n// https://api.themoviedb.org/3/search/keyword?api_key=<<api_key>>&page=1\n","import './sass/main.scss';\nimport refs from './js/refs';\nimport backToTopBtn from './js/back-to-top-btn';\nimport MoviesApiService from './js/api/api-service';\nimport 'material-icons';\n\n// =========== back-to-top-button\nbackToTopBtn();\n\n// =========== new class instance\nconst moviesApiService = new MoviesApiService();\n\n// =========== test by Popular / Genres / By Id\nmoviesApiService.fetchPopularMovies().then(data => console.log(data));\nmoviesApiService.fetchGenresList().then(data => console.log(data));\n\n// =========== listeners\nrefs.searchForm.addEventListener('submit', onSearch);\n\n// =========== search data\nfunction onSearch(e) {\n  e.preventDefault();\n  console.log(e);\n  moviesApiService.searchQuery = e.currentTarget.elements.query.value.trim();\n  console.log(moviesApiService.searchQuery);\n  // return moviesApiService\n  //   .fetchMoviesBySearch(moviesApiService.searchQuery)\n  //   .then(data => console.log(data))\n  //   .catch(err => console.log(err));\n\n  // return moviesApiService\n  //   .fetchFullInfoOfMovie(moviesApiService.searchQuery)\n  //   .then(data => console.log(data))\n  //   .catch(err => console.log(err));\n\n  return moviesApiService\n    .fetchMoviesByGenre(moviesApiService.searchQuery)\n    .then(data => console.log(data))\n    .catch(err => console.log(err));\n}\n"]}